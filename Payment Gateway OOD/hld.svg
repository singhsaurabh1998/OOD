<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1002px" preserveAspectRatio="none" style="width:1694px;height:1002px;background:#FFFFFF;" version="1.1" viewBox="0 0 1694 1002" width="1694px" zoomAndPan="magnify"><title>&lt;b&gt;&lt;color:#3367D6&gt; High-Level Architecture - Scalable Payment Gateway&lt;/color&gt;&lt;/b&gt;</title><defs/><g><g class="title" data-source-line="1"><text fill="#3367D6" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="417.2793" x="633.8834" y="22.9951">High-Level Architecture - Scalable Payment Gateway</text></g><!--entity Frontend--><g class="entity" data-entity="Frontend" data-source-line="15" data-uid="ent0002" id="entity_Frontend"><rect fill="#A5D6A7" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.7529" x="1178.61" y="44.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.7529" x="1188.61" y="67.292">E-Commerce Frontend</text></g><!--entity API--><g class="entity" data-entity="API" data-source-line="16" data-uid="ent0003" id="entity_API"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="255.4365" x="1139.77" y="157.5969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68.8721" x="1233.0522" y="180.592">&#171;Service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="235.4365" x="1149.77" y="196.8889">Payment Gateway API (Fast Path)</text></g><!--entity AsyncProcessor--><g class="entity" data-entity="AsyncProcessor" data-source-line="17" data-uid="ent0004" id="entity_AsyncProcessor"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="200.5303" x="608.22" y="805.5669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68.8721" x="674.0491" y="828.562">&#171;Service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.5303" x="618.22" y="844.8589">Async Payment Processor</text></g><!--entity Router--><g class="entity" data-entity="Router" data-source-line="18" data-uid="ent0005" id="entity_Router"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.7363" x="591.12" y="287.1869"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68.8721" x="620.0521" y="310.182">&#171;Service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.7363" x="601.12" y="326.4789">Routing Engine</text></g><!--entity Kafka--><g class="entity" data-entity="Kafka" data-source-line="19" data-uid="ent0006" id="entity_Kafka"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="226.1104" x="1007.43" y="675.9669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="63.5332" x="1088.7186" y="698.962">&#171;Broker&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="206.1104" x="1017.43" y="715.2589">Kafka Topic (PaymentEvents)</text></g><!--entity RazorPay--><g class="entity" data-entity="RazorPay" data-source-line="20" data-uid="ent0007" id="entity_RazorPay"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="284.0381" x="377.47" y="416.7769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="72.9189" x="483.0296" y="439.772">&#171;Adapter&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="264.0381" x="387.47" y="456.0689">Payment Provider Adapter - RazorPay</text></g><!--entity Stripe--><g class="entity" data-entity="Stripe" data-source-line="21" data-uid="ent0008" id="entity_Stripe"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="260.2764" x="696.35" y="416.7769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="72.9189" x="790.0287" y="439.772">&#171;Adapter&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="240.2764" x="706.35" y="456.0689">Payment Provider Adapter - Stripe</text></g><!--entity PayPal--><g class="entity" data-entity="PayPal" data-source-line="22" data-uid="ent0009" id="entity_PayPal"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="264.9727" x="7" y="416.7769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="72.9189" x="103.0269" y="439.772">&#171;Adapter&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244.9727" x="17" y="456.0689">Payment Provider Adapter - PayPal</text></g><!--entity TxDB--><g class="entity" data-entity="TxDB" data-source-line="23" data-uid="ent0010" id="entity_TxDB"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.9824" x="992" y="416.7769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83.9316" x="1013.5254" y="439.772">&#171;Database&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9824" x="1002" y="456.0689">Transaction DB</text></g><!--entity Reconcile--><g class="entity" data-entity="Reconcile" data-source-line="24" data-uid="ent0011" id="entity_Reconcile"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174.4307" x="968.27" y="546.3769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68.8721" x="1021.0493" y="569.372">&#171;Service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.4307" x="978.27" y="585.6689">Reconciliation Service</text></g><!--entity Monitor--><g class="entity" data-entity="Monitor" data-source-line="25" data-uid="ent0012" id="entity_Monitor"><rect fill="#F1F1F1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155.3037" x="816.83" y="675.9669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68.8721" x="860.0458" y="698.962">&#171;Service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.3037" x="826.83" y="715.2589">Monitoring &amp; Alerts</text></g><!--link Frontend to API--><g class="link" data-entity-1="Frontend" data-entity-2="API" data-source-line="28" data-uid="lnk13" id="link_Frontend_API"><path d="M1267.49,81.0669 C1267.49,101.1869 1267.49,128.2669 1267.49,151.2469" fill="none" id="Frontend-to-API" style="stroke:#3367D6;stroke-width:1;"/><polygon fill="#3367D6" points="1267.49,157.2469,1271.49,148.2469,1267.49,152.2469,1263.49,148.2469,1267.49,157.2469" style="stroke:#3367D6;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.1631" x="1268.49" y="123.6638">1. Payment Request (Sync)</text></g><!--link API to Router--><g class="link" data-entity-1="API" data-entity-2="Router" data-source-line="29" data-uid="lnk14" id="link_API_Router"><path d="M1143.81,210.6369 C1015.1,237.4269 824.504,277.0939 724.164,297.9839" fill="none" id="API-to-Router" style="stroke:#3367D6;stroke-width:1;"/><polygon fill="#3367D6" points="718.29,299.2069,727.9164,301.2885,723.185,298.1878,726.2858,293.4564,718.29,299.2069" style="stroke:#3367D6;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.3047" x="998.49" y="253.2538">2. Route to Correct Provider</text></g><!--link Router to RazorPay--><g class="link" data-entity-1="Router" data-entity-2="RazorPay" data-source-line="30" data-uid="lnk15" id="link_Router_RazorPay"><path d="M627.49,339.9969 C603.95,362.2569 574.3314,390.2464 550.7914,412.4864" fill="none" id="Router-to-RazorPay" style="stroke:#3367D6;stroke-width:1;"/><polygon fill="#3367D6" points="546.43,416.6069,555.719,413.3337,550.0645,413.1731,550.225,407.5185,546.43,416.6069" style="stroke:#3367D6;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.5215" x="595.49" y="382.8438">3a. Call RazorPay</text></g><!--link Router to Stripe--><g class="link" data-entity-1="Router" data-entity-2="Stripe" data-source-line="31" data-uid="lnk16" id="link_Router_Stripe"><path d="M688.88,339.9969 C718.78,362.1769 757.071,390.5824 787.041,412.8124" fill="none" id="Router-to-Stripe" style="stroke:#3367D6;stroke-width:1;"/><polygon fill="#3367D6" points="791.86,416.3869,787.0144,407.8125,787.8441,413.4081,782.2485,414.2378,791.86,416.3869" style="stroke:#3367D6;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.7427" x="751.49" y="382.8438">3b. Call Stripe</text></g><!--link Router to PayPal--><g class="link" data-entity-1="Router" data-entity-2="PayPal" data-source-line="32" data-uid="lnk17" id="link_Router_PayPal"><path d="M590.94,316.6869 C482.83,321.3469 268.39,334.8069 202.49,369.7769 C182.49,380.3969 169.3577,395.1916 158.2477,411.3616" fill="none" id="Router-to-PayPal" style="stroke:#3367D6;stroke-width:1;"/><polygon fill="#3367D6" points="154.85,416.3069,163.2434,411.1542,157.6815,412.1858,156.6498,406.6239,154.85,416.3069" style="stroke:#3367D6;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.999" x="203.49" y="382.8438">3c. Call PayPal</text></g><!--link Router to TxDB--><g class="link" data-entity-1="Router" data-entity-2="TxDB" data-source-line="34" data-uid="lnk18" id="link_Router_TxDB"><path d="M718.24,331.2169 C756.97,341.6669 807.3,355.7669 851.49,369.7769 C898.76,384.7769 945.8857,401.4643 985.9057,416.1143" fill="none" id="Router-to-TxDB" style="stroke:#3367D6;stroke-width:1;"/><polygon fill="#3367D6" points="991.54,418.1769,984.4635,411.3268,986.8447,416.4581,981.7134,418.8393,991.54,418.1769" style="stroke:#3367D6;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283.042" x="902.49" y="382.8438">4. Save Transaction (Atomic + Idempotent)</text></g><!--link API to Kafka--><g class="link" data-entity-1="API" data-entity-2="Kafka" data-source-line="37" data-uid="lnk19" id="link_API_Kafka"><path d="M1346.05,210.6369 C1390.18,230.5769 1436.49,263.2269 1436.49,312.4869 C1436.49,312.4869 1436.49,312.4869 1436.49,573.6769 C1436.49,618.7869 1330.177,653.9963 1239.507,676.2563" fill="none" id="API-to-Kafka" style="stroke:#FFA726;stroke-width:1;"/><polygon fill="#FFA726" points="1233.68,677.6869,1243.3741,679.4257,1238.5358,676.4947,1241.4667,671.6564,1233.68,677.6869" style="stroke:#FFA726;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248.6821" x="1437.49" y="447.6438">5. Publish PaymentEvent (Async path)</text></g><!--link Kafka to AsyncProcessor--><g class="link" data-entity-1="Kafka" data-entity-2="AsyncProcessor" data-source-line="38" data-uid="lnk20" id="link_Kafka_AsyncProcessor"><path d="M1037.61,728.9369 C966.06,751.0969 868.9314,781.1717 797.3214,803.3517" fill="none" id="Kafka-to-AsyncProcessor" style="stroke:#43A047;stroke-width:1;"/><polygon fill="#43A047" points="791.59,805.1269,801.3705,806.285,796.3661,803.6475,799.0036,798.6432,791.59,805.1269" style="stroke:#43A047;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.8535" x="939.49" y="771.6338">6. Consume Event</text></g><!--link AsyncProcessor to Router--><g class="link" data-entity-1="AsyncProcessor" data-entity-2="Router" data-source-line="39" data-uid="lnk21" id="link_AsyncProcessor_Router"><path d="M607.85,817.5969 C494.07,799.7069 324.49,763.0269 324.49,703.2669 C324.49,442.0769 324.49,442.0769 324.49,442.0769 C324.49,385.5669 489.0709,345.5252 584.9709,326.8252" fill="none" id="AsyncProcessor-to-Router" style="stroke:#43A047;stroke-width:1;"/><polygon fill="#43A047" points="590.86,325.6769,581.2608,323.4733,585.9524,326.6338,582.7919,331.3254,590.86,325.6769" style="stroke:#43A047;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.353" x="325.49" y="577.2438">7. Retry / Delayed processing</text></g><!--link AsyncProcessor to TxDB--><g class="link" data-entity-1="AsyncProcessor" data-entity-2="TxDB" data-source-line="40" data-uid="lnk22" id="link_AsyncProcessor_TxDB"><path d="M712.81,805.1169 C720.76,764.1669 740.93,683.2669 783.49,628.9669 C841.34,555.1569 931.5375,502.598 992.6275,472.508" fill="none" id="AsyncProcessor-to-TxDB" style="stroke:#43A047;stroke-width:1;"/><polygon fill="#43A047" points="998.01,469.8569,988.1688,470.2453,993.5246,472.0662,991.7037,477.422,998.01,469.8569" style="stroke:#43A047;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.0283" x="784.49" y="642.0338">8. Update Transaction</text></g><!--link TxDB to Reconcile--><g class="link" data-entity-1="TxDB" data-entity-2="Reconcile" data-source-line="43" data-uid="lnk23" id="link_TxDB_Reconcile"><path d="M1055.49,469.5969 C1055.49,491.8469 1055.49,517.9669 1055.49,540.2069" fill="none" id="TxDB-to-Reconcile" style="stroke:#8E24AA;stroke-width:1;"/><polygon fill="#8E24AA" points="1055.49,546.2069,1059.49,537.2069,1055.49,541.2069,1051.49,537.2069,1055.49,546.2069" style="stroke:#8E24AA;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.9609" x="1056.49" y="512.4438">9. Periodic reconciliation</text></g><!--link Reconcile to Kafka--><g class="link" data-entity-1="Reconcile" data-entity-2="Kafka" data-source-line="44" data-uid="lnk24" id="link_Reconcile_Kafka"><path d="M1068.48,599.1869 C1079.82,621.4369 1093.4564,648.2107 1104.7864,670.4507" fill="none" id="Reconcile-to-Kafka" style="stroke:#8E24AA;stroke-width:1;"/><polygon fill="#8E24AA" points="1107.51,675.7969,1106.9888,665.9618,1105.2403,671.3417,1099.8605,669.5933,1107.51,675.7969" style="stroke:#8E24AA;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.5986" x="1092.49" y="642.0338">10. Publish mismatch events</text></g><!--link Reconcile to Monitor--><g class="link" data-entity-1="Reconcile" data-entity-2="Monitor" data-source-line="45" data-uid="lnk25" id="link_Reconcile_Monitor"><path d="M999.62,599.3969 C984.24,607.7469 968.06,617.7769 954.49,628.9669 C938.13,642.4569 926.4809,656.0652 915.4609,670.9452" fill="none" id="Reconcile-to-Monitor" style="stroke:#8E24AA;stroke-width:1;"/><polygon fill="#8E24AA" points="911.89,675.7669,920.4608,670.9149,914.8658,671.7488,914.0319,666.1537,911.89,675.7669" style="stroke:#8E24AA;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.5645" x="955.49" y="642.0338">Alert on mismatch</text></g><!--link Monitor to API--><g class="link" data-entity-1="Monitor" data-entity-2="API" data-source-line="47" data-uid="lnk26" id="link_Monitor_API"><path d="M972.56,679.5269 C978.27,678.2269 983.95,677.0269 989.49,675.9669 C1045.75,665.2369 1201.53,682.6969 1245.49,645.9669 C1271.26,624.4369 1267.49,607.2569 1267.49,573.6769 C1267.49,312.4869 1267.49,312.4869 1267.49,312.4869 C1267.49,277.0469 1267.49,242.0569 1267.49,216.3069" fill="none" id="Monitor-to-API" style="stroke:#F44336;stroke-width:1;"/><polygon fill="#F44336" points="1267.49,210.3069,1263.49,219.3069,1267.49,215.3069,1271.49,219.3069,1267.49,210.3069" style="stroke:#F44336;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.5508" x="1268.49" y="447.6438">Metrics / Alerts</text></g><g class="legend" data-source-line="50"><rect fill="none" height="107.7813" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1;" width="228.6475" x="1439.5247" y="875.1606"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="104.0088" x="1444.5247" y="893.1557">Color Legend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.9287" x="1444.5247" y="909.4526">&lt;#E3F2FD&gt; Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189.8545" x="1444.5247" y="925.7495">&lt;#FFF3E0&gt; Kafka / Broker</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158.9082" x="1444.5247" y="942.0464">&lt;#E8F5E9&gt; Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209.7471" x="1444.5247" y="958.3432">&lt;#F3E5F5&gt; Provider Adapter</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211.2852" x="1444.5247" y="974.6401">&lt;#A5D6A7&gt; External System</text></g><!--SRC=[dLNVRziu37xNNq6imAx5aFH7agOp0WDkOzyDQu6YwJqDUr0KBX5gIpbPoPOTxdyVBScEtIM7ONb8R98VGttyA5ffSuJ9F9u8dMiJdGm6r-FfTGn_oUMgTuzRp24nOYKj2hin23sO2PxpEQ4U-Qv0PU5FRl4htqtENOfuSZwF6IjVf5fpmmkOS_6oD7gZ5dUL7quozsb525sijQfI_Sk0FhTTn6GoGxEL0kCOJj91TfLD3uVT6ls2fegY_8Fqud3Kb5i-vwNFTfEDqlU7uv85NzkGRf2Eif4FqsQ19fp4a-NicLRMM-SvPMfiC_aTuNB8_cFi3vZY5waG2YuLbBlIOb4oGyHojIG-twIzErqKQ0H2PWYBQl46UDcym4aocbudupRcLHCWUVm0fnalBRN7hiuSlhArI6p3atAdHDF9HwC5bgKs7bRv6jEn34zwOwLQGggMT3O7h4nu5F2HVtdXyApNKi1f-ETqIr-bhzRxzzqyT5ggQYkf3n2QHB9yuj-r8R-l8Bn0gus_c6TcZLpxS_Z7tyX1haUUknp-yLYEPyDLoOMLMi7qrW6UlqrleQtI3jaej18obzn10h_-oC65ntX_q4fQRQfUlOKaHsDB1mps3eoqckNwAqscKkZAArcZmjwd8FpFlTXfAuBBVgEX9_ndWoI_qncfvunL_WuWY2E2gxv_1glXJfkgqePB5gAwoBgf4Gnu7-vudZUsWu3GFmgVXt1lEHWS6aN18WHx2piOxReKmR0FCxv5QFVnDB6w86s_WmyBf8kDEBDd5QFrhDaLR2NtEg_voR9aVEKoU_b7C29AD_DSbYje3mcbTsdMrNGp7qpuuI2v68vTGxfJ6y4r7OVwjoaGN0RsAgA3RhepfkwWDJiufrihvpjSmDf3I43_co9GSzE7lzSBkfNQv5GqlDBmMzWBapaiPRj9huP9uWfgP1t1Uw84ZTGBOjTqih1zM0TTatbviMUpa6N1hLW1kald6BGUYyZF2b2fDPAnsbbrRZWaMUn7uO5Oaw8atloCLKU-noKD3ilT3nXQhPRHplNxmZlTrfo4zHRNamr0Dh_CwiESWxyOdSllhnZgsyB7ksqL_tmnLKw_GM98lv55aU1dRWynAi6NzmC0]--></g></svg>