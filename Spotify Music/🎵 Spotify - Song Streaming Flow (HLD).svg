<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1065px" preserveAspectRatio="none" style="width:1578px;height:1065px;background:#FFFFFF;" version="1.1" viewBox="0 0 1578 1065" width="1578px" zoomAndPan="magnify"><title>&#127925; Spotify - Song Streaming Flow (HLD)</title><defs/><g><g class="title" data-source-line="14"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="303.543" x="630.3735" y="22.9951">&#127925; Spotify - Song Streaming Flow (HLD)</text></g><!--cluster User Device--><g class="cluster" data-entity="User Device" data-source-line="18" data-uid="ent0003" id="cluster_User Device"><polygon fill="none" points="784.29,192.0969,794.29,182.0969,962.29,182.0969,962.29,280.6869,952.29,290.6869,784.29,290.6869,784.29,192.0969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="952.29" x2="962.29" y1="192.0969" y2="182.0969"/><line style="stroke:#181818;stroke-width:1;" x1="784.29" x2="952.29" y1="192.0969" y2="192.0969"/><line style="stroke:#181818;stroke-width:1;" x1="952.29" x2="952.29" y1="192.0969" y2="290.6869"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="93.8096" x="822.3852" y="208.092">User Device</text></g><!--cluster Spotify Backend--><g class="cluster" data-entity="Spotify Backend" data-source-line="22" data-uid="ent0005" id="cluster_Spotify Backend"><polygon fill="none" points="189.29,349.6869,199.29,339.6869,958.29,339.6869,958.29,723.4669,948.29,733.4669,189.29,733.4669,189.29,349.6869" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="948.29" x2="958.29" y1="349.6869" y2="339.6869"/><line style="stroke:#181818;stroke-width:1;" x1="189.29" x2="948.29" y1="349.6869" y2="349.6869"/><line style="stroke:#181818;stroke-width:1;" x1="948.29" x2="948.29" y1="349.6869" y2="733.4669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="128.5156" x="505.5322" y="365.682">Spotify Backend</text></g><!--cluster Data Layer--><g class="cluster" data-entity="Data Layer" data-source-line="34" data-uid="ent0014" id="cluster_Data Layer"><polygon fill="none" points="170.29,950.0669,180.29,940.0669,664.29,940.0669,664.29,1038.6569,654.29,1048.6569,170.29,1048.6569,170.29,950.0669" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="654.29" x2="664.29" y1="950.0669" y2="940.0669"/><line style="stroke:#181818;stroke-width:1;" x1="170.29" x2="654.29" y1="950.0669" y2="950.0669"/><line style="stroke:#181818;stroke-width:1;" x1="654.29" x2="654.29" y1="950.0669" y2="1048.6569"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85.9756" x="370.3022" y="966.062">Data Layer</text></g><!--cluster Content Delivery--><g class="cluster" data-entity="Content Delivery" data-source-line="40" data-uid="ent0018" id="cluster_Content Delivery"><polygon fill="none" points="1071.29,634.8769,1081.29,624.8769,1561.29,624.8769,1561.29,723.4669,1551.29,733.4669,1071.29,733.4669,1071.29,634.8769" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1551.29" x2="1561.29" y1="634.8769" y2="624.8769"/><line style="stroke:#181818;stroke-width:1;" x1="1071.29" x2="1551.29" y1="634.8769" y2="634.8769"/><line style="stroke:#181818;stroke-width:1;" x1="1551.29" x2="1551.29" y1="634.8769" y2="733.4669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="132.9453" x="1245.8173" y="650.872">Content Delivery</text></g><!--cluster Infrastructure--><g class="cluster" data-entity="Infrastructure" data-source-line="45" data-uid="ent0021" id="cluster_Infrastructure"><polygon fill="none" points="231.29,792.4669,241.29,782.4669,670.29,782.4669,670.29,881.0669,660.29,891.0669,231.29,891.0669,231.29,792.4669" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="660.29" x2="670.29" y1="792.4669" y2="782.4669"/><line style="stroke:#181818;stroke-width:1;" x1="231.29" x2="660.29" y1="792.4669" y2="792.4669"/><line style="stroke:#181818;stroke-width:1;" x1="660.29" x2="660.29" y1="792.4669" y2="891.0669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110.8721" x="391.354" y="808.462">Infrastructure</text></g><!--entity Spotify Client App--><g class="entity" data-entity="Spotify Client App" data-source-line="19" data-uid="ent0004" id="entity_Spotify Client App"><rect fill="#FCE5CD" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="145.7129" x="800.44" y="222.0969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="77.1162" x="834.7383" y="245.092">&#171;frontend&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.7129" x="810.44" y="261.3889">Spotify Client App</text></g><!--entity API Gateway--><g class="entity" data-entity="API Gateway" data-source-line="23" data-uid="ent0006" id="entity_API Gateway"><rect fill="#F9CB9C" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="108.4434" x="440.07" y="379.6869"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="77.0137" x="455.7848" y="402.682">&#171;gateway&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="450.07" y="418.9789">API Gateway</text></g><!--entity Auth Service--><g class="entity" data-entity="Auth Service" data-source-line="25" data-uid="ent0007" id="entity_Auth Service"><rect fill="#B6D7A8" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="109.0039" x="302.79" y="509.2769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.2793" x="323.6523" y="532.272">&#171;service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.0039" x="312.79" y="548.5689">Auth Service</text></g><!--entity User Profile Service--><g class="entity" data-entity="User Profile Service" data-source-line="26" data-uid="ent0008" id="entity_User Profile Service"><rect fill="#B6D7A8" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="156.6367" x="246.97" y="664.8769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.2793" x="291.6487" y="687.872">&#171;service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.6367" x="256.97" y="704.1689">User Profile Service</text></g><!--entity Recommendation Service--><g class="entity" data-entity="Recommendation Service" data-source-line="27" data-uid="ent0009" id="entity_Recommendation Service"><rect fill="#B6D7A8" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="199.8398" x="583.37" y="379.6869"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.2793" x="649.6503" y="402.682">&#171;service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179.8398" x="593.37" y="418.9789">Recommendation Service</text></g><!--entity Streaming Service--><g class="entity" data-entity="Streaming Service" data-source-line="28" data-uid="ent0010" id="entity_Streaming Service"><rect fill="#B6D7A8" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="148.8027" x="446.89" y="509.2769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.2793" x="487.6517" y="532.272">&#171;service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.8027" x="456.89" y="548.5689">Streaming Service</text></g><!--entity Metadata Service--><g class="entity" data-entity="Metadata Service" data-source-line="29" data-uid="ent0011" id="entity_Metadata Service"><rect fill="#B6D7A8" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="142.4863" x="439.05" y="664.8769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.2793" x="476.6535" y="687.872">&#171;service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.4863" x="449.05" y="704.1689">Metadata Service</text></g><!--entity Search Service--><g class="entity" data-entity="Search Service" data-source-line="30" data-uid="ent0012" id="entity_Search Service"><rect fill="#B6D7A8" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="124.5967" x="817.99" y="379.6869"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.2793" x="846.6487" y="402.682">&#171;service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.5967" x="827.99" y="418.9789">Search Service</text></g><!--entity Playback Logging Service--><g class="entity" data-entity="Playback Logging Service" data-source-line="31" data-uid="ent0013" id="entity_Playback Logging Service"><rect fill="#B6D7A8" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="198.8965" x="616.84" y="664.8769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67.2793" x="682.6486" y="687.872">&#171;service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.8965" x="626.84" y="704.1689">Playback Logging Service</text></g><!--entity User DB--><g class="entity" data-entity="User DB" data-source-line="35" data-uid="ent0015" id="entity_User DB"><rect fill="#A4C2F4" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="92.3145" x="186.13" y="980.0669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="70.3145" x="197.13" y="1003.062">&#171;storage&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.7451" x="203.9147" y="1019.3589">User DB</text></g><!--entity Music Metadata DB--><g class="entity" data-entity="Music Metadata DB" data-source-line="36" data-uid="ent0016" id="entity_Music Metadata DB"><rect fill="#A4C2F4" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="155.4131" x="313.59" y="980.0669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="70.3145" x="356.1393" y="1003.062">&#171;storage&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.4131" x="323.59" y="1019.3589">Music Metadata DB</text></g><!--entity Playback Logs DB--><g class="entity" data-entity="Playback Logs DB" data-source-line="37" data-uid="ent0017" id="entity_Playback Logs DB"><rect fill="#A4C2F4" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="144.2979" x="504.14" y="980.0669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="70.3145" x="541.1317" y="1003.062">&#171;storage&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.2979" x="514.14" y="1019.3589">Playback Logs DB</text></g><!--entity CDN Edge Servers--><g class="entity" data-entity="CDN Edge Servers" data-source-line="41" data-uid="ent0019" id="entity_CDN Edge Servers"><rect fill="#C9DAF8" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="148.3652" x="1087.11" y="664.8769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="42.5879" x="1139.9987" y="687.872">&#171;cdn&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.3652" x="1097.11" y="704.1689">CDN Edge Servers</text></g><!--entity Origin Media Storage (S3, GCS, etc.)--><g class="entity" data-entity="Origin Media Storage .S3. GCS. etc.." data-source-line="42" data-uid="ent0020" id="entity_Origin Media Storage .S3. GCS. etc.."><rect fill="#A4C2F4" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="274.7686" x="1270.91" y="664.8769"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="70.3145" x="1373.1371" y="687.872">&#171;storage&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="254.7686" x="1280.91" y="704.1689">Origin Media Storage (S3, GCS, etc.)</text></g><!--entity Kafka / PubSub Bus--><g class="entity" data-entity="Kafka . PubSub Bus" data-source-line="46" data-uid="ent0022" id="entity_Kafka . PubSub Bus"><rect fill="#EAD1DC" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="156.0625" x="498.26" y="822.4669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49.1572" x="551.7126" y="845.462">&#171;infra&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.0625" x="508.26" y="861.7589">Kafka / PubSub Bus</text></g><!--entity Cache (Redis / Memcached)--><g class="entity" data-entity="Cache .Redis . Memcached." data-source-line="47" data-uid="ent0023" id="entity_Cache .Redis . Memcached."><rect fill="#EAD1DC" height="52.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="215.6172" x="247.48" y="822.4669"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49.1572" x="330.71" y="845.462">&#171;infra&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195.6172" x="257.48" y="861.7589">Cache (Redis / Memcached)</text></g><!--entity user--><g class="entity" data-entity="user" data-source-line="16" data-uid="ent0002" id="entity_user"><ellipse cx="873.2951" cy="51.2969" fill="#ADD8E6" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M873.2951,59.2969 L873.2951,86.2969 M860.2951,67.2969 L886.2951,67.2969 M873.2951,86.2969 L860.2951,101.2969 M873.2951,86.2969 L886.2951,101.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="857.34" y="115.792">User</text></g><!--link user to Spotify Client App--><g class="link" data-entity-1="user" data-entity-2="Spotify Client App" data-source-line="51" data-uid="lnk24" id="link_user_Spotify Client App"><path d="M873.29,119.4869 C873.29,150.7569 873.29,188.4569 873.29,215.8269" fill="none" id="user-to-Spotify Client App" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="873.29,221.8269,877.29,212.8269,873.29,216.8269,869.29,212.8269,873.29,221.8269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.9146" x="874.29" y="162.1638">1. Tap 'Play Song'</text></g><!--link Spotify Client App to API Gateway--><g class="link" data-entity-1="Spotify Client App" data-entity-2="API Gateway" data-source-line="52" data-uid="lnk25" id="link_Spotify Client App_API Gateway"><path d="M800.24,257.8769 C735.25,267.9169 639.45,289.0069 566.29,331.6869 C545.49,343.8269 530.44,358.9283 517.23,374.8583" fill="none" id="Spotify Client App-to-API Gateway" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="513.4,379.4769,522.224,375.1023,516.5916,375.6281,516.0659,369.9957,513.4,379.4769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.3062" x="613.29" y="319.7538">2. GET /stream?song_id=123</text></g><!--link API Gateway to Auth Service--><g class="link" data-entity-1="API Gateway" data-entity-2="Auth Service" data-source-line="53" data-uid="lnk26" id="link_API Gateway_Auth Service"><path d="M439.65,423.9369 C419.31,432.5969 397.49,445.0369 382.29,462.2769 C370.79,475.3369 365.826,488.103 362.436,503.183" fill="none" id="API Gateway-to-Auth Service" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="361.12,509.0369,366.9966,501.1333,362.2166,504.1586,359.1913,499.3787,361.12,509.0369" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.7246" x="383.29" y="475.3438">3. Validate Token</text></g><!--link API Gateway to Streaming Service--><g class="link" data-entity-1="API Gateway" data-entity-2="Streaming Service" data-source-line="54" data-uid="lnk27" id="link_API Gateway_Streaming Service"><path d="M499.69,432.4969 C504.4,454.7569 509.9594,480.9965 514.6594,503.2365" fill="none" id="API Gateway-to-Streaming Service" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="515.9,509.1069,517.9527,499.4743,514.8662,504.2149,510.1256,501.1284,515.9,509.1069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.0293" x="510.29" y="475.3438">4. Forward Request</text></g><!--link Streaming Service to Metadata Service--><g class="link" data-entity-1="Streaming Service" data-entity-2="Metadata Service" data-source-line="56" data-uid="lnk28" id="link_Streaming Service_Metadata Service"><path d="M519.45,562.2869 C517.42,590.6369 514.5981,630.0122 512.5681,658.3922" fill="none" id="Streaming Service-to-Metadata Service" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="512.14,664.3769,516.7719,655.6852,512.4967,659.3896,508.7923,655.1144,512.14,664.3769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.2256" x="517.29" y="604.9438">5. Get Song Metadata</text></g><!--link Streaming Service to User Profile Service--><g class="link" data-entity-1="Streaming Service" data-entity-2="User Profile Service" data-source-line="57" data-uid="lnk29" id="link_Streaming Service_User Profile Service"><path d="M446.62,557.6969 C440.77,559.1669 434.94,560.5769 429.29,561.8769 C393.39,570.0969 289.86,563.5769 266.29,591.8769 C247.44,614.5069 265.6972,639.7615 288.1772,660.4715" fill="none" id="Streaming Service-to-User Profile Service" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="292.59,664.5369,288.681,655.497,288.9127,661.1491,283.2606,661.3807,292.59,664.5369" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239.8906" x="267.29" y="604.9438">6. Validate user region / subscription</text></g><!--link Streaming Service to Cache (Redis / Memcached)--><g class="link" data-entity-1="Streaming Service" data-entity-2="Cache .Redis . Memcached." data-source-line="58" data-uid="lnk30" id="link_Streaming Service_Cache .Redis . Memcached."><path d="M446.42,558.0069 C440.65,559.4069 434.89,560.7169 429.29,561.8769 C344.24,579.5369 99.23,551.2769 42.29,616.8769 C6,658.6969 10.04,696.4569 42.29,741.4669 C88.58,806.0769 170.4598,831.0519 241.3198,841.1319" fill="none" id="Streaming Service-to-Cache (Redis / Memcached)" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="247.26,841.9769,238.913,836.7492,242.3098,841.2727,237.7864,844.6695,247.26,841.9769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.9102" x="43.29" y="695.7438">7. Fetch CDN link (if cached)</text></g><!--link Streaming Service to CDN Edge Servers--><g class="link" data-entity-1="Streaming Service" data-entity-2="CDN Edge Servers" data-source-line="59" data-uid="lnk31" id="link_Streaming Service_CDN Edge Servers"><path d="M595.97,541.0669 C677.74,547.3169 812.17,561.4769 924.29,591.8769 C990.72,609.8869 1057.881,639.3603 1104.981,661.9703" fill="none" id="Streaming Service-to-CDN Edge Servers" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1110.39,664.5669,1104.0075,657.066,1105.8825,662.4031,1100.5454,664.278,1110.39,664.5669" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244.3467" x="978.29" y="604.9438">8. Get Stream URL (fallback to origin)</text></g><!--link Streaming Service to Playback Logging Service--><g class="link" data-entity-1="Streaming Service" data-entity-2="Playback Logging Service" data-source-line="60" data-uid="lnk32" id="link_Streaming Service_Playback Logging Service"><path d="M596,553.4669 C620.54,561.8569 646.56,574.1369 666.29,591.8769 C688.08,611.4569 699.7625,637.0615 707.1825,659.0615" fill="none" id="Streaming Service-to-Playback Logging Service" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="709.1,664.7469,710.014,654.9405,707.5021,660.0091,702.4335,657.4972,709.1,664.7469" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235.1997" x="680.29" y="604.9438">9. Emit 'SongStarted' Event &#8594; Kafka</text></g><!--link CDN Edge Servers to Spotify Client App--><g class="link" data-entity-1="CDN Edge Servers" data-entity-2="Spotify Client App" data-source-line="62" data-uid="lnk33" id="link_CDN Edge Servers_Spotify Client App"><path d="M1197.53,664.3769 C1219.27,645.4969 1240.67,618.6069 1229.29,591.8769 C1165.06,440.9569 1003.2236,327.5255 922.8836,278.2155" fill="none" id="CDN Edge Servers-to-Spotify Client App" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="917.77,275.0769,923.3481,283.1938,922.0314,277.6924,927.5328,276.3757,917.77,275.0769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241.6743" x="1159.29" y="475.3438">10. Stream Audio Chunks (.m3u8/.ts)</text></g><!--link Playback Logging Service to Kafka / PubSub Bus--><g class="link" data-entity-1="Playback Logging Service" data-entity-2="Kafka . PubSub Bus" data-source-line="63" data-uid="lnk34" id="link_Playback Logging Service_Kafka . PubSub Bus"><path d="M693.17,717.8669 C667.23,746.6969 629.4134,788.7267 603.4534,817.5767" fill="none" id="Playback Logging Service-to-Kafka / PubSub Bus" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="599.44,822.0369,608.4335,818.0222,602.7845,818.3201,602.4866,812.6711,599.44,822.0369" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.1074" x="663.29" y="762.5338">11. Produce 'PlaybackEvent'</text></g><!--link Kafka / PubSub Bus to Playback Logs DB--><g class="link" data-entity-1="Kafka . PubSub Bus" data-entity-2="Playback Logs DB" data-source-line="64" data-uid="lnk35" id="link_Kafka . PubSub Bus_Playback Logs DB"><path d="M576.29,875.4569 C576.29,904.2869 576.29,944.7869 576.29,973.6269" fill="none" id="Kafka / PubSub Bus-to-Playback Logs DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="576.29,979.6269,580.29,970.6269,576.29,974.6269,572.29,970.6269,576.29,979.6269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.4165" x="577.29" y="920.1338">12. Persist for Analytics</text></g><!--SRC=[ZLNDRjf04BxxAKRE0I8bflaFLPlAs9169It2IIzLLItsObOOBzsV85JrscCFVO4-HL-eJz17wEmQ718CmWSGx3VVp7mptrgEMJubWanWGE9nAhZEau1dNC1UnpwEB14ndqnvJdCLgNb6GT1OaJpDw0f4ZaZ2PonFOKWoIQk2uPi3-BIUfdlrQYXuhcYUN5rXwg1z5eJLk9GeEYDp2si6hMPG3PDKFB2O6bZhFBpmBpV051SajJ3_D3Zkd5R3uYGtaA0P-fqDJ2mV2c90RJyy2XTLSP5GKUWvo332-UuuYYbKxz_ldtyWcdB5XdCuX8YZPf4Ib4oCUfsCpw3-jXlkEmw9iKQunuQ0ID3cUw_Bqf5gPPewJiuJ2guz3gbfsLqe_6d97cJCwEvFfvzXLMTJJ16zH9gcyAXay7itS5teRK9BwUsf_NWSg-jhDOAeaDs5bGay1zfQUu8F6UgmIq2Vuey95aOKu_bE8OzIxeA-fOeWETcDcX8HxzPfBoDpuoleyZJTM4mvXj2Kq2LpAie957Dj6VNBLIrERhLaCPILLs9MyyirI9ati1kXS7yoza35lCmUXE-XdQJ5bAYG9jvQeJZ-81XsXJKa3AKhUA4UdHp0TH0T05MnjxyXvOrnYrH2nqgBnvLzHuPZ0WtewK6a1z3IDkN2MekQI3p2B7rCAX5vIoUn-IVPNqLYdXfWMpdUKRWoqh6sEJoygdR5It2FFBWZKwWPoQmRQwvJYRKaJuo1qSSUNBVle27jshsH6F-59Q-FZa-GvGcu25-nYeq_yU0ZoHXEai8THmzMXgqjjOqzzQ33nOo81FhqgwPIkOvJXRKSprVTKfnX-LGLbz0Iu6xcg3AmvJbVQSCgBcXg7Di0gGSo5cngfh65USjmaVu2EyMb6e7PoupbOwYp8ImGsrZNrXZ9BXSzsnYuxtUXZk-ipDf5SU1sjxUnRZAtPMzwq9um1JMZQQI8K3IfGVl1hD7V7x_0BhgPqtfjMxVqXRUisDS9un2CT3wMKFSc9_gouIbfAjvScUMkCfdXHWlWK1CTqy86Xi9MRAnG5RGcGt7762uqH0-xOLB14DzUVawokMAnTFy3]--></g></svg>